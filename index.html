<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Learn Python by caring for your 8-bit snake pet!">
    <meta name="theme-color" content="#1a1a2e">
    <title>PyPet - Learn Python with Snake!</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icons/icon-192.png">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <header>
            <h1>üêç PyPet</h1>
            <p class="subtitle">Learn Python by caring for your snake!</p>
        </header>

        <main>
            <div id="game-container">
                <!-- Pet Display Area -->
                <div id="pet-area">
                    <canvas id="pet-canvas" width="200" height="200"></canvas>
                    <div id="pet-info">
                        <div class="stat">
                            <span class="stat-label">Hunger:</span>
                            <div class="stat-bar"><div id="hunger-bar" class="stat-fill"></div></div>
                        </div>
                        <div class="stat">
                            <span class="stat-label">Happiness:</span>
                            <div class="stat-bar"><div id="happiness-bar" class="stat-fill"></div></div>
                        </div>
                        <div class="stat">
                            <span class="stat-label">Energy:</span>
                            <div class="stat-bar"><div id="energy-bar" class="stat-fill"></div></div>
                        </div>
                        <div class="stat">
                            <span class="stat-label">Level:</span>
                            <span id="level-display">1</span>
                        </div>
                        <div class="stat">
                            <span class="stat-label">XP:</span>
                            <div class="stat-bar"><div id="xp-bar" class="stat-fill xp"></div></div>
                        </div>
                    </div>
                </div>

                <!-- Maze Game Area (hidden by default) -->
                <div id="maze-area" class="hidden">
                    <canvas id="maze-canvas" width="320" height="320"></canvas>
                    <div id="maze-info">
                        <p>Navigate your snake through the maze!</p>
                        <p>Commands: <code>move("north")</code>, <code>move("south")</code>, <code>move("east")</code>, <code>move("west")</code></p>
                        <p>Check walls: <code>at_wall()</code>, <code>can_move("direction")</code></p>
                        <p>Turn: <code>turn_left()</code>, <code>turn_right()</code></p>
                    </div>
                </div>

                <!-- Terminal Area -->
                <div id="terminal">
                    <div id="terminal-header">
                        <span class="terminal-title">Python Terminal</span>
                        <span class="terminal-buttons">
                            <span class="btn-minimize"></span>
                            <span class="btn-maximize"></span>
                            <span class="btn-close"></span>
                        </span>
                    </div>
                    <div id="terminal-output"></div>
                    <div id="terminal-input-line">
                        <span class="prompt">&gt;&gt;&gt;</span>
                        <input type="text" id="terminal-input" placeholder="Type Python commands here..." autocomplete="off" spellcheck="false">
                    </div>
                </div>

                <!-- Help Panel -->
                <div id="help-panel">
                    <h3>üìö Available Commands</h3>
                    <div id="commands-list">
                        <div class="command-category">
                            <h4>üçé Basic Care</h4>
                            <code>feed()</code> - Feed your snake<br>
                            <code>play()</code> - Play with your snake<br>
                            <code>sleep()</code> - Let your snake rest<br>
                            <code>pet()</code> - Pet your snake<br>
                            <code>status()</code> - Check snake's stats
                        </div>
                        <div class="command-category">
                            <h4>üéí Items</h4>
                            <code>inventory()</code> - View items<br>
                            <code>use_item("item_name")</code> - Use an item<br>
                            <code>shop()</code> - View shop
                        </div>
                        <div class="command-category">
                            <h4>üéÆ Mini Games</h4>
                            <code>start_maze()</code> - Play maze game<br>
                            <code>exit_maze()</code> - Leave maze
                        </div>
                        <div class="command-category">
                            <h4>üìñ Learning</h4>
                            <code>help()</code> - Show all commands<br>
                            <code>tutorial()</code> - Start tutorial<br>
                            <code>hint()</code> - Get a hint
                        </div>
                    </div>
                </div>

                <!-- Settings Panel -->
                <div id="settings-panel" class="hidden">
                    <h3>‚öôÔ∏è Settings</h3>
                    <div id="settings-content">
                        <div class="setting-group">
                            <h4>üêç Snake Appearance</h4>
                            <div class="setting-row">
                                <label for="snake-color">Body Color:</label>
                                <input type="color" id="snake-color" value="#4ecca3">
                            </div>
                            <div class="setting-row">
                                <label for="snake-light-color">Light Color:</label>
                                <input type="color" id="snake-light-color" value="#a8e6cf">
                            </div>
                        </div>
                        <div class="setting-group">
                            <h4>üé® Background</h4>
                            <div class="setting-row">
                                <label for="bg-color">Pet Area:</label>
                                <input type="color" id="bg-color" value="#0f3460">
                            </div>
                            <div class="setting-row">
                                <label for="terminal-bg-color">Terminal:</label>
                                <input type="color" id="terminal-bg-color" value="#0a0a0a">
                            </div>
                        </div>
                        <div class="setting-group">
                            <h4>üéÆ Gameplay</h4>
                            <div class="setting-row">
                                <label for="exec-delay">Script Speed:</label>
                                <select id="exec-delay">
                                    <option value="50">Fast</option>
                                    <option value="200" selected>Normal</option>
                                    <option value="500">Slow</option>
                                </select>
                            </div>
                            <div class="setting-row">
                                <label for="auto-save">Auto-save:</label>
                                <input type="checkbox" id="auto-save" checked>
                            </div>
                        </div>
                        <div class="setting-actions">
                            <button id="reset-settings-btn" class="btn-secondary">Reset to Default</button>
                            <button id="close-settings-btn" class="btn-primary">Close</button>
                        </div>
                    </div>
                </div>

                <!-- CSS Editor Panel -->
                <div id="css-editor-panel" class="hidden">
                    <h3>üé® CSS Style Editor</h3>
                    <p class="css-editor-intro">Learn CSS by styling your snake! Edit the code below and click "Apply CSS".</p>
                    
                    <div class="css-examples-bar">
                        <span>Try an example:</span>
                        <select id="css-example-select">
                            <option value="">-- Select --</option>
                            <option value="rainbow">üåà Rainbow</option>
                            <option value="ocean">üåä Ocean</option>
                            <option value="sunset">üåÖ Sunset</option>
                            <option value="neon">üíú Neon</option>
                            <option value="dance">üï∫ Dance</option>
                            <option value="bounce">‚¨ÜÔ∏è Bounce</option>
                            <option value="spin">üîÑ Spin</option>
                            <option value="pulse">üíó Pulse</option>
                            <option value="shake">üì≥ Shake</option>
                            <option value="glow">‚ú® Glow</option>
                        </select>
                    </div>
                    
                    <textarea id="css-editor" spellcheck="false" placeholder="/* Write your CSS here */"></textarea>
                    
                    <div id="css-output" class="css-output"></div>
                    
                    <div class="css-editor-actions">
                        <button id="apply-css-btn" class="btn-primary">‚ñ∂ Apply CSS</button>
                        <button id="reset-css-btn" class="btn-secondary">Reset</button>
                        <button id="close-css-btn" class="btn-secondary">Close</button>
                    </div>
                    
                    <div class="css-tips">
                        <h4>üí° CSS Tips:</h4>
                        <ul>
                            <li><code>.snake-body { fill: #color; }</code> - Change snake color</li>
                            <li><code>animation: name 1s infinite;</code> - Add animation</li>
                            <li><code>box-shadow: 0 0 10px #color;</code> - Add glow</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Settings Toggle Button -->
            <button id="settings-toggle-btn" class="settings-toggle" title="Settings">‚öôÔ∏è</button>
            
            <!-- CSS Editor Toggle Button -->
            <button id="css-toggle-btn" class="css-toggle" title="CSS Editor">üé®</button>
        </main>

        <footer>
            <p>Made with üíö to teach Python | <a href="#" id="install-btn" class="hidden">Install App</a></p>
        </footer>
    </div>

    <!-- Load modules in correct order -->
    <script src="src/terminal/scriptParser.js"></script>
    <script src="src/games/miniGamesManager.js"></script>
    <script src="src/storage/saveManager.js"></script>
    <script src="src/terminal/terminalIntegration.js"></script>
    <script src="src/styles/cssEditor.js"></script>
    <script src="parser.js"></script>
    <script src="app.js"></script>
</body>
</html>
